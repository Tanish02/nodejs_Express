<%- include('../includes/head.ejs') %>
    <link rel="stylesheet" href="/css/cart.css">
    <link rel="stylesheet" href="/css/button.css">
    </head>

    <body>
        <%- include('../includes/nav.ejs') %>
        <main>
            <% if (products.length > 0) { %>
                <ul class="cart__item-list">
                    <% products.forEach(p => { %>
                        <li class="cart__item" onclick="submitForm('<%= p._id %>')">
                            <form action="/product" method="post" id="details_<%= p._id %>">
                                <input type="hidden" name="productId" value="<%= p._id %>">
                                <div>
                                    <div><h1><%= p.title %></h1></div>
                                    <div><h2>Quantity: <%= p.quantity %></h2></div>
                                </div>
                            </form>
                            <form action="/delete-cartproduct" method="POST">
                                <input type="hidden" value="<%= p._id %>" name="productId">
                                <button class="btn danger" type="submit">Delete</button>
                            </form>
                        </li>
                    <% }) %>
                </ul>
                <script>
                    function submitForm(productId) {
                        document.getElementById('details_' + productId).submit();
                    }
                </script>
                
                

            
                <hr>
                <div class="center">
                    <form action="/create-order" method="POST">
                        <button type="submit" class="centered">
                        <div class="svg-wrapper-1">
                            <div class="svg-wrapper">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 70 70"
                                width="32rem"
                                height="60" id="order-process"><g data-name="Delivery Process"><g data-name="Dashed Line"><path fill="#fcd307" d="M61 37v7.29a4 4 0 0 1-4 4H53.31a5.11 5.11 0 0 0-10.22 0H39.7V18.66h7.75a4 4 0 0 1 3.34 1.79l5.71 8.6 3.83 5.77A4 4 0 0 1 61 37zM18.67 18.12c0 .18 0 .36 0 .54a7.81 7.81 0 1 1 0-.54z"></path><path fill="#0c084c" d="M12 15.2a1 1 0 0 0 0-2 5.17 5.17 0 0 0-4.29 2.3l-.19-.45a1 1 0 1 0-1.84.79l1.24 2.92a1 1 0 0 0 .92.6.71.71 0 0 0 .2 0 1 1 0 0 0 .8-1A3.17 3.17 0 0 1 12 15.2zM9.74 23.28A5.16 5.16 0 0 0 14 21l.19.45a1 1 0 0 0 1.31.52 1 1 0 0 0 .53-1.31l-1.24-2.92a1 1 0 0 0-1.92.39 3.16 3.16 0 0 1-3.16 3.16 1 1 0 0 0 0 2z"></path><path fill="#0c084c" d="M61.16,34.27,57.34,28.5h0l-3.09-4.66L51.62,19.9A4.9,4.9,0,0,0,49.17,18a5,5,0,0,0-1.71-.31H18.65a1,1,0,0,0-.17,0l-.18,0a.59.59,0,0,0-.17.1.75.75,0,0,0-.15.09,1.39,1.39,0,0,0-.15.19s-.06.07-.08.11a1.13,1.13,0,0,0-.1.37,7.46,7.46,0,0,1-.1.81,6.86,6.86,0,0,1-3.08,4.51h0a6.81,6.81,0,0,1-3.63,1,7,7,0,0,1-1.37-.15,6.82,6.82,0,0,1,1.37-13.51,6.86,6.86,0,0,1,5.91,3.41,1,1,0,0,0,1.37.37,1,1,0,0,0,.36-1.37A8.82,8.82,0,1,0,4.7,24.45V35.54a1,1,0,0,0,2,0V25.92l.15.07.4.19.34.14.41.16.35.11.43.11.36.08.44.07.26,0V38.24a1,1,0,0,1-1,1H5.7a1,1,0,0,0-1,1v6.09a3,3,0,0,0,3,3H9a6.07,6.07,0,0,0,1.51,3.11H8.27a1,1,0,1,0,0,2H15a7,7,0,0,0,1-.09l.12,0a6,6,0,0,0,.92-.26l.15,0a7.93,7.93,0,0,0,.83-.4l.13-.08A7,7,0,0,0,19,53l.08-.07a6.51,6.51,0,0,0,.69-.7h0a5.82,5.82,0,0,0,.56-.81l.06-.1a6,6,0,0,0,.39-.85.88.88,0,0,0,0-.15,4.69,4.69,0,0,0,.24-.91.14.14,0,0,1,0-.07h21.1a.14.14,0,0,1,0,.07,4.69,4.69,0,0,0,.24.91.88.88,0,0,0,0,.15,6,6,0,0,0,.39.85l.06.1a5.82,5.82,0,0,0,.56.81h0l.2.22h-4a1,1,0,0,0,0,2h8.5a6.11,6.11,0,0,0,0-12.22,7,7,0,0,0-1,.09l-.12,0a6,6,0,0,0-.92.26l-.15,0a7.93,7.93,0,0,0-.83.4l-.13.08a7,7,0,0,0-.76.55l-.08.07a6.51,6.51,0,0,0-.69.7h0a5.82,5.82,0,0,0-.56.81l-.06.1a6,6,0,0,0-.39.85.88.88,0,0,0,0,.15,5.53,5.53,0,0,0-.24.91.14.14,0,0,1,0,.07H40.7V41.24H60v3.09a2.88,2.88,0,0,1-.06.59c0,.08,0,.16-.07.25a2.47,2.47,0,0,1-.1.29,2.24,2.24,0,0,1-.13.27c0,.08-.08.16-.13.23a2.15,2.15,0,0,1-.18.24c-.06.07-.11.14-.17.2l-.21.19a1.74,1.74,0,0,1-.22.18,1.09,1.09,0,0,1-.23.14,2.34,2.34,0,0,1-.27.15l-.24.09-.3.09-.27,0a2.85,2.85,0,0,1-.42,0,1,1,0,0,0,0,2l.22,0h.13c.12,0,.23,0,.35-.06a3.54,3.54,0,0,0,.45-.08,4,4,0,0,0,.49-.15,3.61,3.61,0,0,0,.42-.16,3.55,3.55,0,0,0,.43-.23c.13-.08.27-.15.39-.24a3.37,3.37,0,0,0,.35-.29c.13-.11.26-.21.37-.32s.18-.22.27-.34a3.9,3.9,0,0,0,.31-.4c.08-.12.14-.25.21-.38a3.81,3.81,0,0,0,.23-.45,4.16,4.16,0,0,0,.16-.5c0-.14.09-.27.12-.41a5.34,5.34,0,0,0,.1-1V37A5,5,0,0,0,61.16,34.27ZM52.31,48.33a4.11,4.11,0,1,1-4.11-4.11A4.11,4.11,0,0,1,52.31,48.33Zm-45.61-2V41.24H8.84a3,3,0,0,0,3-3V26.89l.13,0,.45-.08c.24,0,.47-.09.71-.15l.46-.14.41-.13V42.31l-.34.07-.22.06a2.45,2.45,0,0,0-.47.14l-.14.06a4.11,4.11,0,0,0-.57.25,4.33,4.33,0,0,0-.6.36,4.21,4.21,0,0,0-.53.38l-.06,0c-.17.15-.32.3-.47.46s-.29.33-.44.52a5.91,5.91,0,0,0-.84,1.53c0,.1-.07.19-.1.28l0,.05a4.85,4.85,0,0,0-.14.53l0,.16a.5.5,0,0,0,0,.12H7.7A1,1,0,0,1,6.7,46.33Zm4.23,2a3.81,3.81,0,0,1,.07-.75l0-.14c0-.09.05-.18.07-.26h0a.49.49,0,0,0,0-.11l.08-.23a3.62,3.62,0,0,1,.53-.94c.11-.14.21-.27.32-.39s.22-.22.34-.32h0l0,0a3.58,3.58,0,0,1,.33-.24,2.36,2.36,0,0,1,.38-.22,2.48,2.48,0,0,1,.37-.17c.08,0,.08,0,.14-.06l.23-.07.27-.07.14,0,.11,0a3,3,0,0,1,.55-.05H15a4.11,4.11,0,1,1-4.11,4.11Zm10.14-1a.24.24,0,0,1,0-.08,6.85,6.85,0,0,0-.2-.81.78.78,0,0,1-.05-.14c-.09-.24-.19-.47-.3-.7l-.06-.12a7.42,7.42,0,0,0-.44-.7l-.1-.14a6.53,6.53,0,0,0-.55-.63h0a6.64,6.64,0,0,0-.64-.55l-.14-.1a6.33,6.33,0,0,0-.7-.44l-.13-.05a4.76,4.76,0,0,0-.7-.3l-.13,0a5.9,5.9,0,0,0-.83-.2l-.08,0V41.24H33.76a1,1,0,0,0,0-2H16v-14l.23-.18.28-.22.49-.45.21-.21a8.93,8.93,0,0,0,.63-.73h0a8.23,8.23,0,0,0,.53-.78l.15-.26a6.54,6.54,0,0,0,.3-.59c.05-.1.1-.21.14-.31s.16-.39.23-.59.07-.21.1-.32.13-.46.18-.69,0-.16.05-.24,0,0,0-.06H38.7V47.33ZM40.7,39.24V19.66h6.75A3.07,3.07,0,0,1,50,21l3.26,4.9,1.43,2.15H49.46a3,3,0,0,1-3-3V22.84a1,1,0,1,0-2,0v2.21a5,5,0,0,0,5,5H56l3.54,5.32A3,3,0,0,1,60,37v2.2Z"></path><path fill="#0c084c" d="M47.71 33.09h-3.6a1 1 0 0 0 0 2h3.6a1 1 0 1 0 0-2zM15.55 47.5a.56.56 0 0 0-.17-.09.6.6 0 0 0-.19-.06.81.81 0 0 0-.38 0 .6.6 0 0 0-.19.06l-.18.09-.15.12a1 1 0 0 0 0 1.42 1.58 1.58 0 0 0 .15.12.76.76 0 0 0 .18.09.6.6 0 0 0 .19.06l.19 0 .19 0a.6.6 0 0 0 .19-.06.56.56 0 0 0 .17-.09 1 1 0 0 0 .16-.12 1 1 0 0 0 0-1.42zM47.28 48a.94.94 0 0 0 0 .76 1 1 0 0 0 .21.33 1 1 0 0 0 1.42 0 1 1 0 0 0 .21-.33.94.94 0 0 0 0-.76 1.15 1.15 0 0 0-.21-.33 1 1 0 0 0-1.42 0A1 1 0 0 0 47.28 48zM35.46 52.44H33a1 1 0 1 0 0 2h2.42a1 1 0 1 0 0-2z"></path></g></g></svg>
                                <path fill="none" d="M0 0h24v24H0z"></path>
                                <path
                                fill="currentColor"
                                d="M1.946 9.315c-.522-.174-.527-.455.01-.634l19.087-6.362c.529-.176.832.12.684.638l-5.454 19.086c-.15.529-.455.547-.679.045L12 14l6-8-8 6-8.054-2.685z"
                                ></path>
                            </svg>
                            </div>
                        </div>
                        <span>Order Now</span>
                        </button>

                    </form>
                </div>
                
            <% } else { %>
                <h1>No Products in Cart!</h1>
            <% } %>
        </main>
        <%- include('../includes/end.ejs') %>